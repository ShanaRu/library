{"remainingRequest":"D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IBM课件和代码\\work\\library\\src\\components\\administrator\\showUserInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IBM课件和代码\\work\\library\\src\\components\\administrator\\showUserInformation.vue","mtime":1606379861919},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgcXMgZnJvbSAncXMnDQppbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJy4uLy4uL2Fzc2V0cy9qcy90aW1lLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJzaG93VXNlckluZm9ybWF0aW9uIiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2VhcmNoVXNlcm5hbWU6IiIsDQogICAgICAgICAgICBib3hDdXJyZW50UGFnZToxLA0KICAgICAgICAgICAgYm94UGFnZVNpemU6NSwNCiAgICAgICAgICAgIGRhdGFMZW5ndGg6MCwNCiAgICAgICAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsDQogICAgICAgICAgICBjdXJyZW50UGFnZToxLCAvL+WIneWni+mhtQ0KICAgICAgICAgICAgcGFnZVNpemU6NywgICAgLy/mr4/pobXnmoTmlbDmja4NCiAgICAgICAgICAgIHVzZXJMaXN0OltdLA0KICAgICAgICAgICAgcm93Ont9LA0KICAgICAgICAgICAgdGFibGVEYXRhOltdLA0KICAgICAgICAgICAgdGFibGVMZW5ndGg6MA0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmdldFVzZXJMaXN0KDEsdGhpcy5wYWdlU2l6ZSk7DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGhhbmRsZUNsaWNrKHJvdyl7DQogICAgICAgICAgICB0aGlzLnJvdyA9IHJvdzsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckJvcnJvd2luZ0RhdGEoMSx0aGlzLmJveFBhZ2VTaXplLHJvdy51c2VyLmlkKTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24oY3VycmVudFBhZ2Upew0KICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlOw0KICAgICAgICAgICAgdGhpcy5nZXRVc2VyTGlzdChjdXJyZW50UGFnZSx0aGlzLnBhZ2VTaXplKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0VXNlckxpc3QoY3VycmVudFBhZ2UscGFnZVNpemUpIHsgDQogICAgICAgICAgICBheGlvcyh7DQogICAgICAgIMKgwqDCoMKgwqDCoMKgwqBtZXRob2Q6J3Bvc3QnLA0KICAgICAgICDCoMKgwqDCoMKgwqDCoMKgdXJsOiIvdXNlci9nZXR1c2VyaW5mb2xpc3QiLA0KICAgICAgICAgICAgICAgIGRhdGE6cXMucGFyc2Uoew0KICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTpwYWdlU2l6ZSwNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgOmN1cnJlbnRQYWdlLA0KICAgICAgICAgICAgICAgICAgICBzdGF0dXM6MSwNCiAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6dGhpcy5zZWFyY2hVc2VybmFtZQ0KwqDCoMKgwqDCoMKgwqDCoCAgICAgICAgfSkNCsKgwqDCoMKgwqDCoCAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlckxpc3QgPSByZXN1bHQuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhTGVuZ3RoID0gcmVzdWx0LmNvdW50Ow0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVzZXJMaXN0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6ZSZ6K+vJywNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZGVsKHJvdyl7DQogICAgICAgICAgICB0aGlzLnJvdyA9IHJvdzsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucm93LnVzZXIuaWQpOw0KICAgICAgICAgICAgdGhpcy4kY29uZmlybSgi5rC45LmF5Yig6Zmk6K+l55So5oi3LCDmmK/lkKbnu6fnu60/IiwgIuaPkOekuiIsIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIGF4aW9zKHsNCiAgICAgICAgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgdXJsOiIvdXNlci91c2VyY2FuY2VsbGF0aW9uIiwNCiAgICAgICAgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgbWV0aG9kOsKgImdldCIsDQogICAgICAgIMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHBhcmFtczp7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQgOnRoaXMucm93LnVzZXIuaWQNCiAgICAgICAgICAgICAgICAgICAgfQ0KwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7DQogICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5jb2RlID09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfms6jplIDmiJDlip8nDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsgDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KHRoaXMuY3VycmVudFBhZ2UsdGhpcy5wYWdlU2l6ZSk7DQogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5jb2RlID09IDExMyl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1zZw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfms6jplIDlpLHotKUnDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+azqOmUgOWksei0pScNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW5mbyIsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlQm94Q3VycmVudENoYW5nZShib3hDdXJyZW50UGFnZSkgew0KICAgICAgICAgICAgdGhpcy5ib3hDdXJyZW50UGFnZSA9IGJveEN1cnJlbnRQYWdlOw0KICAgICAgICAgICAgdGhpcy5nZXRVc2VyQm9ycm93aW5nRGF0YSh0aGlzLmJveEN1cnJlbnRQYWdlLHRoaXMuYm94UGFnZVNpemUsdGhpcy5yb3cudXNlci5pZCk7DQogICAgICAgIH0sDQogICAgICAgIGdldFVzZXJCb3Jyb3dpbmdEYXRhKGN1cnJlbnRQYWdlLHBhZ2VTaXplLGlkKXsNCiAgICAgICAgICAgIGF4aW9zKHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6J2dldCcsDQogICAgICAgICAgICAgICAgdXJsOiIvYm9ycm93SW5mby91c2VySGlzdG9yeSIsDQogICAgICAgICAgICAgICAgcGFyYW1zOnsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6Y3VycmVudFBhZ2UsDQogICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOnBhZ2VTaXplLA0KICAgICAgICAgICAgICAgICAgICB1c2VySWQ6aWQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7DQogICAgICAgICAgICAgICAgdGhpcy50YWJsZUxlbmd0aCA9IHJlc3VsdC5jb3VudDsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpOw0KICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGFibGVMZW5ndGgpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mUmeivrycsDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHNlYXJjaFVzZXIoKSB7DQogICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KDEsdGhpcy5wYWdlU2l6ZSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgZmlsdGVyczogew0KICAgICAgZm9ybWF0RGF0ZSh0aW1lKSB7DQogICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7DQogICAgICAgIC8vIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tJyk7DQogICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkJyk7DQogICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["showUserInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"showUserInformation.vue","sourceRoot":"src/components/administrator","sourcesContent":["<template>\r\n    <div class=\"showUserInformation-container\">\r\n        <div class=\"demo-input-suffix\">\r\n            <el-input placeholder=\"请输入用户姓名\" v-model=\"searchUsername\" type=\"text\" class=\"searchInput\" maxlength=\"30\" clearable>\r\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i></el-input>\r\n            <el-button @click=\"searchUser\" type=\"primary\">查询用户</el-button>\r\n        </div> \r\n        <el-table style=\"width: 100%;\"\r\n            :data=\"userList.slice(0,7)\" stripe border>\r\n            <el-table-column prop=\"user.id\" label=\"编号\" min-width=\"5%\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"nickname\" label=\"姓名\" min-width=\"8%\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"sex\" label=\"性别\" min-width=\"4%\"  align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.sex == 1\">男</span>\r\n                    <span v-if=\"scope.row.sex == 2\">女</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"age\" label=\"年龄\" min-width=\"4%\"  align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"birthday\" label=\"生日\" min-width=\"8%\"  align=\"center\">\r\n                <template slot-scope=\"scope\">{{scope.row.birthday | formatDate}}</template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"telephone\" label=\"电话\" min-width=\"10%\"  align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"email\" label=\"邮箱\" min-width=\"15%\"  align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"address\" label=\"地址\" min-width=\"13%\"  align=\"center\" show-overflow-tooltip></el-table-column>\r\n            <el-table-column prop=\"personalDesc\" label=\"描述\" min-width=\"15%\"  align=\"center\" show-overflow-tooltip></el-table-column>\r\n            <el-table-column label=\"操作\" min-width=\"13%\"  align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n            <el-button @click=\"handleClick(scope.row)\"  type=\"success\" size=\"small\" plain>借阅历史</el-button>\r\n                <el-button v-if=\"userList.length > 0\" size=\"small\" type=\"danger\" @click=\"del(scope.row)\" plain>注销</el-button>\r\n            </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\"\r\n            :page-size=\"pageSize\"         \r\n            layout=\"total, prev, pager, next, jumper\"\r\n            :total=\"dataLength\">\r\n        </el-pagination>\r\n        <el-dialog  :visible.sync=\"dialogTableVisible\" width=\"300\" class=\"abow_dialog\" center title=\"借阅历史\">\r\n            <el-table\r\n                :data=\"tableData.slice(0,5)\" style=\"100%\" height=\"430px\"\r\n                border>\r\n                <el-table-column prop=\"book.bookName\" align=\"center\" label=\"图书名称\" min-width=\"30%\"></el-table-column>\r\n                <el-table-column prop=\"borrowDate\"     align=\"center\" label=\"借阅时间\" min-width=\"10%\">\r\n                    <template slot-scope=\"scope\">{{scope.row.borrowDate | formatDate}}</template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"returnDate\"     align=\"center\" label=\"应归还时间\" min-width=\"10%\">\r\n                    <template slot-scope=\"scope\">{{scope.row.returnDate | formatDate}}</template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"renewState\" align=\"center\" label=\"借阅有效期\" min-width=\"10%\">\r\n                <template scope=\"scope\">                    \r\n                    <p v-if=\"scope.row.renewState=='0'\">1个月</p>\r\n                    <p v-if=\"scope.row.renewState=='1'\">2个月</p>            \r\n                </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"right\" label=\"状态\" min-width=\"10%\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-tag v-if=\"scope.row.borrowState == 0\" type=\"warning\">审核中</el-tag>\r\n                        <el-tag v-if=\"scope.row.borrowState == 1\" type=\"success\">借阅中</el-tag>\r\n                        <el-tag v-if=\"scope.row.borrowState == 2\" type=\"info\">已归还</el-tag>\r\n                        <el-tag v-if=\"scope.row.borrowState == -1\" type=\"danger\">拒绝借阅</el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-pagination\r\n                @current-change=\"handleBoxCurrentChange\"\r\n                :current-page=\"boxCurrentPage\"\r\n                :page-size=\"boxPageSize\"         \r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"tableLength\">\r\n            </el-pagination>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click=\"dialogTableVisible = false\">关闭</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\nimport {formatDate} from '../../assets/js/time.js'\r\nexport default {\r\n    name: \"showUserInformation\",\r\n    data() {\r\n        return {\r\n            searchUsername:\"\",\r\n            boxCurrentPage:1,\r\n            boxPageSize:5,\r\n            dataLength:0,\r\n            dialogTableVisible: false,\r\n            currentPage:1, //初始页\r\n            pageSize:7,    //每页的数据\r\n            userList:[],\r\n            row:{},\r\n            tableData:[],\r\n            tableLength:0\r\n        }\r\n    },\r\n    created() {\r\n        this.getUserList(1,this.pageSize);\r\n    },\r\n    methods: {\r\n        handleClick(row){\r\n            this.row = row;\r\n            this.dialogTableVisible = true;\r\n            this.getUserBorrowingData(1,this.boxPageSize,row.user.id);\r\n        },\r\n        handleCurrentChange: function(currentPage){\r\n            this.currentPage = currentPage;\r\n            this.getUserList(currentPage,this.pageSize);\r\n        },\r\n        getUserList(currentPage,pageSize) { \r\n            axios({\r\n                method:'post',\r\n                url:\"/user/getuserinfolist\",\r\n                data:qs.parse({\r\n                    pageSize:pageSize,\r\n                    currentPage :currentPage,\r\n                    status:1,\r\n                    nickname:this.searchUsername\r\n                })\r\n            }).then(response => {\r\n                let result = response.data;\r\n                if(result.code == 200) {\r\n                    // console.log(result.data);\r\n                    this.userList = result.data;\r\n                    this.dataLength = result.count;\r\n                    // console.log(this.userList);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: '错误',\r\n                    type: 'error'\r\n                });\r\n            })\r\n        },\r\n        del(row){\r\n            this.row = row;\r\n            console.log(this.row.user.id);\r\n            this.$confirm(\"永久删除该用户, 是否继续?\", \"提示\", {\r\n                confirmButtonText: \"确定\",\r\n                cancelButtonText: \"取消\",\r\n                type: \"warning\"\r\n            })\r\n            .then(() => {\r\n                axios({\r\n                    url:\"/user/usercancellation\",\r\n                    method: \"get\",\r\n                    params:{\r\n                        userId :this.row.user.id\r\n                    }\r\n                }).then(response=>{\r\n                    let result = response.data;\r\n                    console.log(result);\r\n                    if(result.code == 200) {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '注销成功'\r\n                        }); \r\n                        this.getUserList(this.currentPage,this.pageSize);\r\n                    }else if(result.code == 113){\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: result.msg\r\n                        });\r\n                    }else{\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '注销失败'\r\n                        });\r\n                    }\r\n                }).catch(error=>{\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '注销失败'\r\n                    });\r\n                })\r\n            })\r\n            .catch(() => {\r\n                this.$message({\r\n                    type: \"info\",\r\n                    message: \"已取消删除\"\r\n                });\r\n            });\r\n        },\r\n        handleBoxCurrentChange(boxCurrentPage) {\r\n            this.boxCurrentPage = boxCurrentPage;\r\n            this.getUserBorrowingData(this.boxCurrentPage,this.boxPageSize,this.row.user.id);\r\n        },\r\n        getUserBorrowingData(currentPage,pageSize,id){\r\n            axios({\r\n                method:'get',\r\n                url:\"/borrowInfo/userHistory\",\r\n                params:{\r\n                    currentPage:currentPage,\r\n                    pageSize:pageSize,\r\n                    userId:id\r\n                }\r\n            })\r\n            .then(response => {\r\n                let result = response.data;\r\n                this.tableData = result.data;\r\n                this.tableLength = result.count;\r\n                // console.log(result);\r\n                // console.log(this.tableLength);\r\n            })\r\n            .catch(error => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: '错误',\r\n                    type: 'error'\r\n                });\r\n            })\r\n        },\r\n        searchUser() {\r\n            this.getUserList(1,this.pageSize)\r\n        }\r\n    },\r\n    filters: {\r\n      formatDate(time) {\r\n        let date = new Date(time);\r\n        // return formatDate(date, 'yyyy-MM-dd hh:mm');\r\n        return formatDate(date, 'yyyy-MM-dd');\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-dialog__body {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 54px;\r\n    bottom: 70px;\r\n    right: 0;\r\n    padding: 0;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n    overflow-y: auto;\r\n}\r\n.el-dialog__footer{\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n.history{\r\n  font-size: 20px;\r\n  float:left;\r\n}\r\n.demo-input-suffix {\r\n    margin: 30px 0;\r\n    float: right;\r\n}\r\n.searchInput {\r\n    width: 300px;\r\n    margin-right: 20px;\r\n}\r\n.el-pagination {\r\n    margin-top: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n</style>"]}]}