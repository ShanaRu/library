{"remainingRequest":"D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IBM课件和代码\\work\\library\\src\\components\\user\\modifyPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IBM课件和代码\\work\\library\\src\\components\\user\\modifyPassword.vue","mtime":1606311627008},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgcXMgZnJvbSAncXMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJtb2RpZnlQYXNzd29yZCIsDQogIGRhdGEoKSB7DQogICAgdmFyIHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5ydWxlRm9ybS5uZXdQYXNzd29yZCkgew0KICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEiKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgfQ0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIHJ1bGVGb3JtOiB7DQogICAgICAgIG9yaWdpbmFsUGFzc3dvcmQ6ICIiLA0KICAgICAgICBuZXdQYXNzd29yZDogIiIsDQogICAgICAgIGNvbmZpcm1QYXNzd29yZDogIiIsDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgb3JpZ2luYWxQYXNzd29yZDogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaXp+WvhueggSIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBwYXR0ZXJuOiAvXig/PS4qXGQpKD89LipbYS16QS1aXSkoPz0uKlt+IUAjJCVeJipdKVtcZGEtekEtWn4hQCMkJV4mKl17OCwzMH0kLywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlv4XpobvlkIzml7bljIXlkKvmlbDlrZfjgIHlrZfmr43lkoznibnmrorlrZfnrKYiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbWluOiA4LA0KICAgICAgICAgICAgbWF4OiAzMCwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlr4bnoIHnmoTplb/luqblnKggOCDliLAgMzAg5L2N5LmL6Ze0IiwNCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIG5ld1Bhc3N3b3JkOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5paw5a+G56CBIiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHBhdHRlcm46IC9eKD89LipcZCkoPz0uKlthLXpBLVpdKSg/PS4qW34hQCMkJV4mKl0pW1xkYS16QS1afiFAIyQlXiYqXXs4LDMwfSQvLA0KICAgICAgICAgICAgbWVzc2FnZTogIuW/hemhu+WQjOaXtuWMheWQq+aVsOWtl+OAgeWtl+avjeWSjOeJueauiuWtl+espiIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDgsDQogICAgICAgICAgICBtYXg6IDMwLA0KICAgICAgICAgICAgbWVzc2FnZTogIuWvhueggeeahOmVv+W6puWcqCA4IOWIsCAzMCDkvY3kuYvpl7QiLA0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgY29uZmlybVBhc3N3b3JkOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl56Gu6K6k5a+G56CBIiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHBhdHRlcm46IC9eKD89LipcZCkoPz0uKlthLXpBLVpdKSg/PS4qW34hQCMkJV4mKl0pW1xkYS16QS1afiFAIyQlXiYqXXs4LDMwfSQvLA0KICAgICAgICAgICAgbWVzc2FnZTogIuW/hemhu+WQjOaXtuWMheWQq+aVsOWtl+OAgeWtl+avjeWSjOeJueauiuWtl+espiIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDgsDQogICAgICAgICAgICBtYXg6IDMwLA0KICAgICAgICAgICAgbWVzc2FnZTogIuWvhueggeeahOmVv+W6puWcqCA4IOWIsCAzMCDkvY3kuYvpl7QiLA0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBBeGlvcyh7DQogICAgICAgICAgICBtZXRob2Q6J3Bvc3QnLA0KICAgICAgICAgICAgdXJsOid1c2VyL21vZGlmeXBhc3N3b3JkJywNCiAgICAgICAgICAgIGRhdGE6cXMucGFyc2Uoew0KICAgICAgICAgICAgICB1c2VySWQ6TnVtYmVyLnBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKSwNCiAgICAgICAgICAgICAgb2xkUGFzc3dvcmQ6dGhpcy5ydWxlRm9ybS5vcmlnaW5hbFBhc3N3b3JkLA0KICAgICAgICAgICAgICBuZXdQYXNzd29yZDp0aGlzLnJ1bGVGb3JtLm5ld1Bhc3N3b3JkDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICBpZihyZXN1bHQuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y5oiQ5YqfJw0KICAgICAgICAgICAgICB9KTsgDQogICAgICAgICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5jb2RlID09IDEwNyl7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1zZywNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv53lrZjlpLHotKUnLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y5aSx6LSlJw0KICAgICAgICAgICAgICB9KTsgDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygi5L+d5a2Y5aSx6LSlIik7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgew0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["modifyPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modifyPassword.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n  <div class=\"modifyPassword-container\">\r\n    <el-form\r\n      :model=\"ruleForm\"\r\n      :rules=\"rules\"\r\n      ref=\"ruleForm\"\r\n      label-width=\"100px\"\r\n      class=\"demo-ruleForm\"\r\n      label-position=\"left\">\r\n      <el-form-item label=\"原密码\" prop=\"originalPassword\">\r\n        <el-input\r\n          type=\"password\"\r\n          placeholder=\"请输入原密码\"\r\n          v-model=\"ruleForm.originalPassword\"\r\n          autocomplete=\"off\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n        <el-input\r\n          type=\"password\"\r\n          placeholder=\"请输入新密码)\"\r\n          v-model=\"ruleForm.newPassword\"\r\n          autocomplete=\"off\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\r\n        <el-input\r\n          type=\"password\"\r\n          placeholder=\"请确认新密码\"\r\n          v-model=\"ruleForm.confirmPassword\"\r\n          autocomplete=\"off\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" style=\"margin-left:60px\">提交</el-button>\r\n        <el-button @click=\"resetForm('ruleForm')\" style=\"margin-left:90px\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Axios from 'axios'\r\nimport qs from 'qs'\r\nexport default {\r\n  name: \"modifyPassword\",\r\n  data() {\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value !== this.ruleForm.newPassword) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      ruleForm: {\r\n        originalPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n      },\r\n      rules: {\r\n        originalPassword: [\r\n          {\r\n            required: true,\r\n            message: \"请输入旧密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            pattern: /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\\da-zA-Z~!@#$%^&*]{8,30}$/,\r\n            message: \"必须同时包含数字、字母和特殊字符\",\r\n          },\r\n          {\r\n            min: 8,\r\n            max: 30,\r\n            message: \"密码的长度在 8 到 30 位之间\",\r\n          }\r\n        ],\r\n        newPassword: [\r\n          {\r\n            required: true,\r\n            message: \"请输入新密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            pattern: /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\\da-zA-Z~!@#$%^&*]{8,30}$/,\r\n            message: \"必须同时包含数字、字母和特殊字符\",\r\n          },\r\n          {\r\n            min: 8,\r\n            max: 30,\r\n            message: \"密码的长度在 8 到 30 位之间\",\r\n          }\r\n        ],\r\n        confirmPassword: [\r\n          {\r\n            required: true,\r\n            message: \"请输入确认密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          { validator: validatePass, trigger: 'blur' },\r\n          {\r\n            pattern: /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\\da-zA-Z~!@#$%^&*]{8,30}$/,\r\n            message: \"必须同时包含数字、字母和特殊字符\",\r\n          },\r\n          {\r\n            min: 8,\r\n            max: 30,\r\n            message: \"密码的长度在 8 到 30 位之间\",\r\n          }\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          Axios({\r\n            method:'post',\r\n            url:'user/modifypassword',\r\n            data:qs.parse({\r\n              userId:Number.parseInt(sessionStorage.getItem('userId')),\r\n              oldPassword:this.ruleForm.originalPassword,\r\n              newPassword:this.ruleForm.newPassword\r\n            })\r\n          })\r\n          .then(response => {\r\n            let result = response.data;\r\n            if(result.code == 200) {\r\n              this.$message({\r\n                  type: 'success',\r\n                  message: '保存成功'\r\n              }); \r\n              this.$refs.ruleForm.resetFields();\r\n            }else if(result.code == 107){\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: result.msg,\r\n                    type: 'error'\r\n                });\r\n            }else {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: '保存失败',\r\n                    type: 'error'\r\n                });\r\n            }\r\n          })\r\n          .catch(error => {\r\n            this.$message({\r\n                type: 'error',\r\n                message: '保存失败'\r\n              }); \r\n          })\r\n        } else {\r\n          console.log(\"保存失败\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.demo-ruleForm {\r\n  border-radius:3px;\r\n  box-shadow: 0 0px 7px 0 rgba(0, 0, 0, 0.3);\r\n  padding: 50px;\r\n  height: 35%;\r\n  width: 35%;\r\n  background-color: #fff;\r\n}\r\n\r\n.modifyPassword-container{\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 50px;\r\n  padding-bottom: 00px;\r\n}\r\n</style>>"]}]}