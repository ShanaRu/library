{"remainingRequest":"D:\\IBM课件和代码\\work\\library\\node_modules\\babel-loader\\lib\\index.js!D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IBM课件和代码\\work\\library\\src\\components\\user\\bookshelf.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IBM课件和代码\\work\\library\\src\\components\\user\\bookshelf.vue","mtime":1606377301873},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IBM课件和代码\\work\\library\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnBhcnNlLWludCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGZvcm1hdERhdGUgYXMgX2Zvcm1hdERhdGUgfSBmcm9tICcuLi8uLi9hc3NldHMvanMvdGltZS5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYm9va3NoZWxmIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9ycm93aW5nRGF0YTogW10sCiAgICAgIGZsYWc6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/liKTmlq3mmK/lkKbpgL7mnJ8KICAgIGlzT3ZlcmR1ZTogZnVuY3Rpb24gaXNPdmVyZHVlKHJldHVybkRhdGUpIHsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciByZXR1cm5EYXRlMSA9IG5ldyBEYXRlKHJldHVybkRhdGUpOwogICAgICB2YXIgbm93TWlsbCA9IG5vdy5nZXRUaW1lKCk7CiAgICAgIHZhciByZXR1cm5NaWxsID0gcmV0dXJuRGF0ZTEuZ2V0VGltZSgpOwoKICAgICAgaWYgKHJldHVybk1pbGwgPCBub3dNaWxsKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLy/nu63lgJ8KICAgIHJlbmV3OiBmdW5jdGlvbiByZW5ldyhpbmRleCwgaWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhueUs+ivt+e7reWAn+ivpeWbvuS5pu+8jOavj+acrOS5puS7hemZkOe7reWAn+S4gOasoe+8iOWFsTMw5aSp77yJLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGF4aW9zLnB1dCgiL2JvcnJvd0luZm8vcmVuZXdCb29rP2lkPSIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzLmdldEJvb2tTZWxmRGF0YSgpOyAvL+abtOaWsOmhtemdouaVsOaNrgoKCiAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+e7reWAn+aIkOWKnycsCiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn57ut5YCf5aSx6LSlJywKICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ezu+e7n+mUmeivrycsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI57ut5YCfJywKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+eUqOaIt+S5puaetuS/oeaBrwogICAgZ2V0Qm9va1NlbGZEYXRhOiBmdW5jdGlvbiBnZXRCb29rU2VsZkRhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCIvYm9ycm93SW5mby9ib29rU2hlbGY/dXNlcklkPSIgKyBOdW1iZXIucGFyc2VJbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXN1bHQgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YSk7CiAgICAgICAgICBfdGhpczIuYm9ycm93aW5nRGF0YSA9IHJlc3VsdC5kYXRhOwoKICAgICAgICAgIGlmIChfdGhpczIuYm9ycm93aW5nRGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBfdGhpczIuZmxhZyA9ICFfdGhpczIuZmxhZzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn57O757uf6ZSZ6K+vJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy/mnKrlrqHmoLjliY3lj6/ku6XliKDpmaTor6XkuaYKICAgIGRlbGV0ZUJvb2s6IGZ1bmN0aW9uIGRlbGV0ZUJvb2soaW5kZXgsIGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5Y+W5raI5YCf6ZiF6K+l5Zu+5LmmLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGF4aW9zLmRlbGV0ZSgiL2JvcnJvd0luZm8vIiArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMzLmdldEJvb2tTZWxmRGF0YSgpOyAvL+abtOaWsOW9k+WJjemhtemdouaVsOaNrgoKCiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICflj5bmtojlgJ/pmIXmiJDlip8nLAogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICflj5bmtojlgJ/pmIXlpLHotKUnLAogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ezu+e7n+mUmeivrycsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WFs+mXreWPlua2iOWAn+mYheivt+axgicsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRCb29rU2VsZkRhdGEoKTsKICB9LAogIC8v5pe26Ze06L+H5ruk5Zmo77yM5bCGVGltZVN0YW1w57G75Z6L5pWw5o2u5o2i5oiQ6Ieq5a6a5LmJ5qC85byPCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7IC8vIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tJyk7CgogICAgICByZXR1cm4gX2Zvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQnKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["bookshelf.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"bookshelf-container\">\r\n        <div class=\"headline\">\r\n            我的书架\r\n        </div>\r\n        <el-row :gutter=\"20\" v-show=\"!flag\">\r\n            <el-col :span=\"8\" v-for=\"(item,index) in borrowingData\" v-bind:key=\"index\">\r\n                <el-card class=\"box-card\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span class=\"showBook\">{{item.book.bookName}}</span>\r\n                        <div style=\"margin-top:10px\">\r\n                            <el-tag style=\" margin-right: 15px\" type=\"warning\"  v-if=\"item.borrowState == 0\">审核中</el-tag>\r\n                            <el-tag style=\"margin-right: 15px\" type=\"success\"  v-if=\"item.borrowState == 1\">借阅中</el-tag>\r\n                            <el-tag style=\"margin-right: 15px; cursor:pointer\" @click=\"renew(index,item.id)\" v-if=\"item.renewState == 0 && item.borrowState == 1 && !isOverdue(item.returnDate)\">申请续借</el-tag>\r\n                            <el-tag style=\"margin-right: 15px\" type=\"success\"  v-if=\"item.renewState == 1\">已续借</el-tag>\r\n                            <el-tag style=\"margin-right: 15px; cursor:pointer\" type=\"danger\" v-if=\"item.borrowState == 0\" @click=\"deleteBook(index,item.id)\">撤销借书</el-tag>\r\n                            <el-tag style=\"margin-right: 15px\" type=\"warning\"  v-if=\"isOverdue(item.returnDate)\">已逾期</el-tag>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"text item\">借阅日期：{{item.borrowDate | formatDate}}</div>\r\n                    <div class=\"text item\">归还日期：{{item.returnDate | formatDate}}</div>\r\n                    <div class=\"text item\">作者：{{item.book.author}}</div>\r\n                    <div class=\"text item\">类型：{{item.book.type.typeName}}</div>\r\n                    <div class=\"text item\">国家：{{item.book.country.countryName}}</div>\r\n                    <div class=\"text item\">篇幅：{{item.book.space}}</div>\r\n                    <div class=\"text item\">主题：{{item.book.theme.themeName}}</div>\r\n                    <div class=\"text item information\">简介：{{item.book.info}}</div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row> \r\n        <el-row :gutter=\"20\" v-show=\"flag\">\r\n            <el-col :span=\"8\" v-for=\"o in 3\" :key=\"o\">\r\n                <el-card class=\"box-card\" style=\"height:450px\">\r\n                    <div class=\"boxFontSize\">\r\n                       暂无书籍\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport {formatDate} from '../../assets/js/time.js'\r\nexport default {\r\n    name: \"bookshelf\",\r\n    data() {\r\n        return {\r\n            borrowingData: [],\r\n            flag:false\r\n        }\r\n    },\r\n    methods: {\r\n        //判断是否逾期\r\n        isOverdue(returnDate){\r\n            let now = new Date();\r\n            let returnDate1 = new Date(returnDate);\r\n            let nowMill = now.getTime();\r\n            let returnMill = returnDate1.getTime();\r\n            if(returnMill<nowMill){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        },\r\n        //续借\r\n        renew(index,id) {\r\n            this.$confirm('此操作将申请续借该图书，每本书仅限续借一次（共30天）, 是否继续?', '提示', {\r\n                cancelButtonText: '取消',\r\n                confirmButtonText: '确定',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                axios.put(\"/borrowInfo/renewBook?id=\"+id)\r\n                .then(response => {\r\n                    if(response.data.code == 200) {\r\n                        this.getBookSelfData();//更新页面数据\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '续借成功',\r\n                            showClose: true\r\n                        });\r\n                    }else {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '续借失败',\r\n                            showClose: true\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.$message({\r\n                    type: 'info',\r\n                    message: '系统错误',\r\n                    showClose: true\r\n                }); \r\n                })  \r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'info',\r\n                    message: '已取消续借',\r\n                    showClose: true\r\n                });          \r\n            });\r\n        },\r\n        //用户书架信息\r\n        getBookSelfData() {\r\n            axios.get(\"/borrowInfo/bookShelf?userId=\"+Number.parseInt(sessionStorage.getItem('userId')))\r\n            .then(response => {\r\n                let result = response.data;\r\n                if(result.code == 200) {\r\n                    // console.log(result.data);\r\n                    this.borrowingData = result.data;\r\n                    if(this.borrowingData.length == 0) {\r\n                        this.flag = !this.flag;\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: '系统错误',\r\n                    type: 'error'\r\n                });\r\n            })\r\n        },\r\n        //未审核前可以删除该书\r\n        deleteBook(index,id) {\r\n            this.$confirm('此操作将取消借阅该图书, 是否继续?', '提示', {\r\n                cancelButtonText: '取消',\r\n                confirmButtonText: '确定',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                axios.delete(\"/borrowInfo/\"+id)\r\n                .then(response => {\r\n                    if(response.data.code == 200) {\r\n                        this.getBookSelfData();//更新当前页面数据\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '取消借阅成功',\r\n                            showClose: true\r\n                        });\r\n                    }else {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '取消借阅失败',\r\n                            showClose: true\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.$message({\r\n                    type: 'info',\r\n                    message: '系统错误',\r\n                    showClose: true\r\n                }); \r\n                })  \r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'info',\r\n                    message: '关闭取消借阅请求',\r\n                    showClose: true\r\n                });          \r\n            });\r\n        }\r\n    },\r\n    created() {\r\n        this.getBookSelfData();\r\n    },\r\n    //时间过滤器，将TimeStamp类型数据换成自定义格式\r\n    filters: {\r\n      formatDate(time) {\r\n        let date = new Date(time);\r\n        // return formatDate(date, 'yyyy-MM-dd hh:mm');\r\n        return formatDate(date, 'yyyy-MM-dd');\r\n      }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bookshelf-container {\r\n    margin: 30px 100px;\r\n}\r\n.text {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .item {\r\n    margin-bottom: 18px;\r\n  }\r\n\r\n  .clearfix:before,\r\n  .clearfix:after {\r\n    display: table;\r\n    content: \"\";\r\n  }\r\n  .clearfix:after {\r\n    clear: both\r\n  }\r\n\r\n  .box-card {\r\n    width: 90%;\r\n  }\r\n  .headline {\r\n      text-align: center;\r\n      font-size: 25px;\r\n      padding-bottom: 50px;\r\n  }\r\n   .el-row {\r\n    margin-bottom: 20px;\r\n  }\r\n  .el-col {\r\n    border-radius: 4px;\r\n  }\r\n  .information {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 4;\r\n    height: 76px;\r\n  }\r\n  .boxFontSize{\r\n    text-align:center;\r\n    line-height:430px\r\n  }\r\n</style>"],"sourceRoot":"src/components/user"}]}